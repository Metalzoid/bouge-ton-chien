<div class="container pt-4">
  <div class="row">
    <% @user_rewards.each do |user_reward| %>
      <div class="col-md-4">
        <div class="card mb-4", id="card-user-reward" >
          <div class="card-body" data-controller="promo-code">
            <h5 class="card-title" style="font-weight-bold; color: #895f33;"><%= user_reward.reward.name %></h5>
            <p class="card-text"><b>Réduction: </b><%= user_reward.reward.reduction %> %</p>
    <div class="border-0 d-flex justify-content-between">
      <p class="card-text">
          <b>Prix: </b>
          <del class="text-danger"><%= user_reward.reward.price %> €</del>
      </p>
      <p class="card-text">
          <b>Prix réduit: </b>
          <%= ((user_reward.reward.price * 100 - user_reward.reward.reduction) / 100.0).round(2) %> €</p>
    </div>
            <div class="progress">
              <% if user_reward.progress == 'en cours' %>
                <div class="progress-bar bg-warning" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
              <% elsif user_reward.progress == 'terminé' %>
                <div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
              <% end %>
            </div>
            <p class="card-text">
              <% if user_reward.progress == 'pending' %>
                <i>En cours</i>
              <% elsif user_reward.progress == 'used' %>
                <i>Terminé</i>
              <% end %>
             </p>

            <button data-action="click->promo-code#showCode" class="btn btn-primary mt-2">Code promo</button>
            <div data-promo-code-target="code" class="mt-2" style="display: none;">
              <span id="promo-code-<%= user_reward.id %>"><%= user_reward.reward.promocode %></span>
              <button data-action="click->promo-code#copyCode" data-promo-code-id="<%= user_reward.id %>" class="btn btn-secondary btn-sm">Copier le code</button>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
